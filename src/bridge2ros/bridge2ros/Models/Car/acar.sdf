<sdf version="1.9">
  <model name="ackerman_car">
    <!-- Define the Ackerman steering car -->
    <link name="chassis">
      <!-- Chassis properties -->
      <pose>0 0 0.5 0 0 0</pose>
      <collision name="chassis_collision">
        <!-- Collision properties -->
        <geometry>
          <box>
            <size>2 1 0.5</size>
          </box>
        </geometry>
      </collision>
      <visual name="chassis_visual">
        <!-- Visual properties -->
        <geometry>
          <box>
            <size>2 1 0.5</size>
          </box>
        </geometry>
      </visual>
    </link>
    <joint name="front_axle" type="revolute">
      <!-- Front axle joint -->
      <child>front_wheel</child>
      <parent>chassis</parent>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>1 0 0</xyz>
      </axis>
    </joint>
    <link name="front_wheel">
      <!-- Front wheel properties -->
      <pose>1 0 0.25 0 0 0</pose>
      <collision name="front_wheel_collision">
        <!-- Collision properties -->
        <geometry>
          <cylinder>
            <radius>0.25</radius>
            <length>0.1</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="front_wheel_visual">
        <!-- Visual properties -->
        <geometry>
          <cylinder>
            <radius>0.25</radius>
            <length>0.1</length>
          </cylinder>
        </geometry>
      </visual>
    </link>
    <joint name="rear_axle" type="fixed">
      <!-- Rear axle joint -->
      <child>rear_wheel</child>
      <parent>chassis</parent>
      <pose>0 0 -0.25 0 0 0</pose>
    </joint>
    <link name="rear_wheel">
      <!-- Rear wheel properties -->
      <pose>-1 0 0.25 0 0 0</pose>
      <collision name="rear_wheel_collision">
        <!-- Collision properties -->
        <geometry>
          <cylinder>
            <radius>0.25</radius>
            <length>0.1</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="rear_wheel_visual">
        <!-- Visual properties -->
        <geometry>
          <cylinder>
            <radius>0.25</radius>
            <length>0.1</length>
          </cylinder>
        </geometry>
      </visual>
    </link>
    <!-- Lidar camera -->
    <gazebo reference="chassis">
      <!-- Gazebo properties -->
      <sensor name="lidar_sensor" type="ray">
        <!-- Lidar sensor -->
        <pose>0 0 1 0 0 0</pose>
        <visualize>true</visualize>
        <update_rate>10</update_rate>
        <ray>
          <scan>
            <horizontal>
              <!-- Horizontal scan -->
              <samples>720</samples>
              <resolution>1</resolution>
              <min_angle>-1.5708</min_angle>
              <max_angle>1.5708</max_angle>
            </horizontal>
          </scan>
          <range>
            <!-- Range properties -->
            <min>0.01</min>
            <max>10</max>
            <resolution>0.01</resolution>
          </range>
          <noise>
            <!-- Noise properties -->
            <type>gaussian</type>
            <mean>0</mean>
            <stddev>0.01</stddev>
          </noise>
        </ray>
        <plugin name="lidar_ros_plugin" filename="libackerman_lidar_plugin.so">
          <!-- Plugin to publish Lidar data -->
          <topic>lidar_topic</topic>
        </plugin>
      </sensor>
    </gazebo>
  </model>
</sdf>
